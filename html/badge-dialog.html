<dialog class="mdl-dialog mdl-typography--text-center" style="min-width:360px;" id="badge_dialog">
    <h4 class="mdl-typography--headline" id="badge_dialog_title">回答者バッジを取得しました！</h4>
    <div class="mdl-dialog__content" id="badge_dialog_body">
        <img src="<?php echo $url; ?>badge-answer-01.svg" alt="バッジ" style="min-width:100px">
        <p class="mdl-typography--text-left margin--top-16px">
            回答いただきありがとうございます。<br>
            ○○○○さんの当サイトへの貢献の表彰として<br>
            バッジを進呈させていただきます。
        </p>
    </div>
    <div class="mdl-dialog__actions">
        <button type="button" class="mdl-button close">閉じる</button>
        <button type="button" class="mdl-button mdl-button--shadow-none mdl-button--colored">バッジ一覧ページを見る</button>
    </div>
</dialog>
<script>

    var i=0;
    var bdialog = null;
    var badgesobj = <?php echo json_encode($badgeobj); ?>;
    function showDialogs(){
        if( bdialog == null || bdialog == undefined ) {
            bdialog = document.querySelector('#badge_dialog');
            if (! bdialog.showModal) {
                dialogPolyfill.registerDialog(bdialog);
            }
            bdialog.querySelector('#badge_dialog_title').innerHTML = badgesobj[i].title+'バッジを取得しました！';
            bdialog.querySelector('#badge_dialog .mdl-button.close').addEventListener('click', function() {
                if (bdialog) {
                    bdialog.close();
                }
                bdialog = null;
            });
            bdialog.showModal();
            i++;
        }
        var timerId=setTimeout(showDialogs, 1200);
        if(i >= 3){
            clearTimeout(timerId);
        }
        console.log('loop');
    }
    showDialogs();

 </script>